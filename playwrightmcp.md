# /playwrightmcp - Playwright MCPを使用したWebページ確認・操作

## 概要
ユーザーが指定した指示に基づいて、Playwright MCPツールを使用してWebページの確認・操作を行うスラッシュコマンドです。ブラウザの起動から操作、スクリーンショット取得まで、様々なWeb自動化タスクを実行できます。エラーが発生した場合は、問題が解決するまで修正を繰り返します。

## 使用方法
`/playwrightmcp [確認・操作したい内容の指示]`

例：
- `/playwrightmcp Googleで"Claude AI"を検索して結果を確認`
- `/playwrightmcp https://example.com のフォームに入力してスクリーンショットを撮る`
- `/playwrightmcp GitHubのリポジトリページでスター数を確認`

## 実行内容

### ステップ1: 指示の解析
ユーザーから受け取った指示を解析し、必要な操作を特定します：
- URLの抽出
- 実行すべきアクション（クリック、入力、スクロール等）
- 確認すべき要素
- スクリーンショットの必要性

### ステップ2: ブラウザ操作の実行
以下の手順でPlaywright MCPツールを使用します：

1. **ブラウザの起動**
   - 必要に応じて`mcp__playwright__browser_install`でブラウザをインストール
   - エラーが発生した場合は自動的にインストールを試行

2. **ページへのナビゲーション**
   - `mcp__playwright__browser_navigate`で指定されたURLまたは検索エンジンへ移動

3. **ページ操作**
   - `mcp__playwright__browser_snapshot`でページ構造を取得
   - `mcp__playwright__browser_click`で要素をクリック
   - `mcp__playwright__browser_type`でテキスト入力
   - `mcp__playwright__browser_select_option`でドロップダウン選択
   - その他必要に応じて各種操作を実行

4. **結果の確認**
   - `mcp__playwright__browser_take_screenshot`でスクリーンショット取得
   - `mcp__playwright__browser_console_messages`でコンソールメッセージ確認
   - 必要に応じて要素の存在や内容を確認

### ステップ3: エラーハンドリング
エラーが発生した場合の対処：

1. **ブラウザ未インストールエラー**
   - 自動的に`mcp__playwright__browser_install`を実行
   - 再度操作を試行

2. **要素が見つからないエラー**
   - `mcp__playwright__browser_wait_for`で要素の出現を待機
   - ページ構造を再取得して要素を探索
   - 必要に応じて代替の選択方法を試行

3. **タイムアウトエラー**
   - 待機時間を調整
   - ページのリロードを試行
   - 別のアプローチで操作を実行

### ステップ4: 結果の報告
操作完了後、以下を報告します：
- 実行した操作の詳細
- 取得した情報やスクリーンショット
- エラーが発生した場合はその内容と対処方法

## 例

### 例1: Google検索
```
/playwrightmcp Googleで"AI技術"を検索して結果の最初の3件を確認
```

実行内容：
1. Googleにアクセス
2. 検索ボックスに"AI技術"を入力
3. 検索を実行
4. 結果の最初の3件のタイトルとURLを取得
5. スクリーンショットを撮影

### 例2: フォーム入力
```
/playwrightmcp https://example.com/contact のフォームに名前とメールアドレスを入力
```

実行内容：
1. 指定URLにアクセス
2. フォーム要素を特定
3. 名前とメールアドレスのフィールドに適切な値を入力
4. 入力後の状態をスクリーンショットで確認

## 注意事項
- ブラウザ操作は時間がかかる場合があります
- セキュリティ上、パスワードなどの機密情報は入力しません
- CAPTCHAなど自動化を防ぐ仕組みがあるサイトでは動作しない場合があります
- エラーが発生しても、可能な限り修正を試みて目的を達成します